<html>
<head>
<title>SnakeGame.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6897bb;}
.s4 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
SnakeGame.py</font>
</center></td></tr></table>
<pre><span class="s0"># Snake Tutorial Python</span>

<span class="s2">import </span><span class="s1">math</span>
<span class="s2">import </span><span class="s1">random</span>
<span class="s2">import </span><span class="s1">pygame</span>
<span class="s2">import </span><span class="s1">tkinter </span><span class="s2">as </span><span class="s1">tk</span>
<span class="s2">from </span><span class="s1">tkinter </span><span class="s2">import </span><span class="s1">messagebox</span>


<span class="s2">class </span><span class="s1">cube(object):</span>
    <span class="s1">rows = </span><span class="s3">20</span>
    <span class="s1">w = </span><span class="s3">500</span>

    <span class="s2">def </span><span class="s1">__init__(self</span><span class="s2">, </span><span class="s1">start</span><span class="s2">, </span><span class="s1">dirnx=</span><span class="s3">1</span><span class="s2">, </span><span class="s1">dirny=</span><span class="s3">0</span><span class="s2">, </span><span class="s1">color=(</span><span class="s3">255</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s1">)):</span>
        <span class="s1">self.pos = start</span>
        <span class="s1">self.dirnx = </span><span class="s3">1</span>
        <span class="s1">self.dirny = </span><span class="s3">0</span>
        <span class="s1">self.color = color</span>

    <span class="s2">def </span><span class="s1">move(self</span><span class="s2">, </span><span class="s1">dirnx</span><span class="s2">, </span><span class="s1">dirny):</span>
        <span class="s1">self.dirnx = dirnx</span>
        <span class="s1">self.dirny = dirny</span>
        <span class="s1">self.pos = (self.pos[</span><span class="s3">0</span><span class="s1">] + self.dirnx</span><span class="s2">, </span><span class="s1">self.pos[</span><span class="s3">1</span><span class="s1">] + self.dirny)</span>

    <span class="s2">def </span><span class="s1">draw(self</span><span class="s2">, </span><span class="s1">surface</span><span class="s2">, </span><span class="s1">eyes=</span><span class="s2">False</span><span class="s1">):</span>
        <span class="s1">dis = self.w // self.rows</span>
        <span class="s1">i = self.pos[</span><span class="s3">0</span><span class="s1">]</span>
        <span class="s1">j = self.pos[</span><span class="s3">1</span><span class="s1">]</span>

        <span class="s1">pygame.draw.rect(surface</span><span class="s2">, </span><span class="s1">self.color</span><span class="s2">, </span><span class="s1">(i * dis + </span><span class="s3">1</span><span class="s2">, </span><span class="s1">j * dis + </span><span class="s3">1</span><span class="s2">, </span><span class="s1">dis - </span><span class="s3">2</span><span class="s2">, </span><span class="s1">dis - </span><span class="s3">2</span><span class="s1">))</span>
        <span class="s2">if </span><span class="s1">eyes:</span>
            <span class="s1">centre = dis // </span><span class="s3">2</span>
            <span class="s1">radius = </span><span class="s3">3</span>
            <span class="s1">circleMiddle = (i * dis + centre - radius</span><span class="s2">, </span><span class="s1">j * dis + </span><span class="s3">8</span><span class="s1">)</span>
            <span class="s1">circleMiddle2 = (i * dis + dis - radius * </span><span class="s3">2</span><span class="s2">, </span><span class="s1">j * dis + </span><span class="s3">8</span><span class="s1">)</span>
            <span class="s1">pygame.draw.circle(surface</span><span class="s2">, </span><span class="s1">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">circleMiddle</span><span class="s2">, </span><span class="s1">radius)</span>
            <span class="s1">pygame.draw.circle(surface</span><span class="s2">, </span><span class="s1">(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">circleMiddle2</span><span class="s2">, </span><span class="s1">radius)</span>


<span class="s2">class </span><span class="s1">snake(object):</span>
    <span class="s1">body = []</span>
    <span class="s1">turns = {}</span>

    <span class="s2">def </span><span class="s1">__init__(self</span><span class="s2">, </span><span class="s1">color</span><span class="s2">, </span><span class="s1">pos):</span>
        <span class="s1">self.color = color</span>
        <span class="s1">self.head = cube(pos)</span>
        <span class="s1">self.body.append(self.head)</span>
        <span class="s1">self.dirnx = </span><span class="s3">0</span>
        <span class="s1">self.dirny = </span><span class="s3">1</span>

    <span class="s2">def </span><span class="s1">move(self):</span>
        <span class="s2">for </span><span class="s1">event </span><span class="s2">in </span><span class="s1">pygame.event.get():</span>
            <span class="s2">if </span><span class="s1">event.type == pygame.QUIT:</span>
                <span class="s1">pygame.quit()</span>

            <span class="s1">keys = pygame.key.get_pressed()</span>

            <span class="s2">for </span><span class="s1">key </span><span class="s2">in </span><span class="s1">keys:</span>
                <span class="s2">if </span><span class="s1">keys[pygame.K_LEFT]:</span>
                    <span class="s1">self.dirnx = -</span><span class="s3">1</span>
                    <span class="s1">self.dirny = </span><span class="s3">0</span>
                    <span class="s1">self.turns[self.head.pos[:]] = [self.dirnx</span><span class="s2">, </span><span class="s1">self.dirny]</span>

                <span class="s2">elif </span><span class="s1">keys[pygame.K_RIGHT]:</span>
                    <span class="s1">self.dirnx = </span><span class="s3">1</span>
                    <span class="s1">self.dirny = </span><span class="s3">0</span>
                    <span class="s1">self.turns[self.head.pos[:]] = [self.dirnx</span><span class="s2">, </span><span class="s1">self.dirny]</span>

                <span class="s2">elif </span><span class="s1">keys[pygame.K_UP]:</span>
                    <span class="s1">self.dirnx = </span><span class="s3">0</span>
                    <span class="s1">self.dirny = -</span><span class="s3">1</span>
                    <span class="s1">self.turns[self.head.pos[:]] = [self.dirnx</span><span class="s2">, </span><span class="s1">self.dirny]</span>

                <span class="s2">elif </span><span class="s1">keys[pygame.K_DOWN]:</span>
                    <span class="s1">self.dirnx = </span><span class="s3">0</span>
                    <span class="s1">self.dirny = </span><span class="s3">1</span>
                    <span class="s1">self.turns[self.head.pos[:]] = [self.dirnx</span><span class="s2">, </span><span class="s1">self.dirny]</span>

        <span class="s2">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">enumerate(self.body):</span>
            <span class="s1">p = c.pos[:]</span>
            <span class="s2">if </span><span class="s1">p </span><span class="s2">in </span><span class="s1">self.turns:</span>
                <span class="s1">turn = self.turns[p]</span>
                <span class="s1">c.move(turn[</span><span class="s3">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">turn[</span><span class="s3">1</span><span class="s1">])</span>
                <span class="s2">if </span><span class="s1">i == len(self.body) - </span><span class="s3">1</span><span class="s1">:</span>
                    <span class="s1">self.turns.pop(p)</span>
            <span class="s2">else</span><span class="s1">:</span>
                <span class="s2">if </span><span class="s1">c.dirnx == -</span><span class="s3">1 </span><span class="s2">and </span><span class="s1">c.pos[</span><span class="s3">0</span><span class="s1">] &lt;= </span><span class="s3">0</span><span class="s1">:</span>
                    <span class="s1">c.pos = (c.rows - </span><span class="s3">1</span><span class="s2">, </span><span class="s1">c.pos[</span><span class="s3">1</span><span class="s1">])</span>
                <span class="s2">elif </span><span class="s1">c.dirnx == </span><span class="s3">1 </span><span class="s2">and </span><span class="s1">c.pos[</span><span class="s3">0</span><span class="s1">] &gt;= c.rows - </span><span class="s3">1</span><span class="s1">:</span>
                    <span class="s1">c.pos = (</span><span class="s3">0</span><span class="s2">, </span><span class="s1">c.pos[</span><span class="s3">1</span><span class="s1">])</span>
                <span class="s2">elif </span><span class="s1">c.dirny == </span><span class="s3">1 </span><span class="s2">and </span><span class="s1">c.pos[</span><span class="s3">1</span><span class="s1">] &gt;= c.rows - </span><span class="s3">1</span><span class="s1">:</span>
                    <span class="s1">c.pos = (c.pos[</span><span class="s3">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">0</span><span class="s1">)</span>
                <span class="s2">elif </span><span class="s1">c.dirny == -</span><span class="s3">1 </span><span class="s2">and </span><span class="s1">c.pos[</span><span class="s3">1</span><span class="s1">] &lt;= </span><span class="s3">0</span><span class="s1">:</span>
                    <span class="s1">c.pos = (c.pos[</span><span class="s3">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">c.rows - </span><span class="s3">1</span><span class="s1">)</span>
                <span class="s2">else</span><span class="s1">:</span>
                    <span class="s1">c.move(c.dirnx</span><span class="s2">, </span><span class="s1">c.dirny)</span>

    <span class="s2">def </span><span class="s1">reset(self</span><span class="s2">, </span><span class="s1">pos):</span>
        <span class="s1">self.head = cube(pos)</span>
        <span class="s1">self.body = []</span>
        <span class="s1">self.body.append(self.head)</span>
        <span class="s1">self.turns = {}</span>
        <span class="s1">self.dirnx = </span><span class="s3">0</span>
        <span class="s1">self.dirny = </span><span class="s3">1</span>

    <span class="s2">def </span><span class="s1">addCube(self):</span>
        <span class="s1">tail = self.body[-</span><span class="s3">1</span><span class="s1">]</span>
        <span class="s1">dx</span><span class="s2">, </span><span class="s1">dy = tail.dirnx</span><span class="s2">, </span><span class="s1">tail.dirny</span>

        <span class="s2">if </span><span class="s1">dx == </span><span class="s3">1 </span><span class="s2">and </span><span class="s1">dy == </span><span class="s3">0</span><span class="s1">:</span>
            <span class="s1">self.body.append(cube((tail.pos[</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s2">, </span><span class="s1">tail.pos[</span><span class="s3">1</span><span class="s1">])))</span>
        <span class="s2">elif </span><span class="s1">dx == -</span><span class="s3">1 </span><span class="s2">and </span><span class="s1">dy == </span><span class="s3">0</span><span class="s1">:</span>
            <span class="s1">self.body.append(cube((tail.pos[</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s2">, </span><span class="s1">tail.pos[</span><span class="s3">1</span><span class="s1">])))</span>
        <span class="s2">elif </span><span class="s1">dx == </span><span class="s3">0 </span><span class="s2">and </span><span class="s1">dy == </span><span class="s3">1</span><span class="s1">:</span>
            <span class="s1">self.body.append(cube((tail.pos[</span><span class="s3">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">tail.pos[</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)))</span>
        <span class="s2">elif </span><span class="s1">dx == </span><span class="s3">0 </span><span class="s2">and </span><span class="s1">dy == -</span><span class="s3">1</span><span class="s1">:</span>
            <span class="s1">self.body.append(cube((tail.pos[</span><span class="s3">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">tail.pos[</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)))</span>

        <span class="s1">self.body[-</span><span class="s3">1</span><span class="s1">].dirnx = dx</span>
        <span class="s1">self.body[-</span><span class="s3">1</span><span class="s1">].dirny = dy</span>

    <span class="s2">def </span><span class="s1">draw(self</span><span class="s2">, </span><span class="s1">surface):</span>
        <span class="s2">for </span><span class="s1">i</span><span class="s2">, </span><span class="s1">c </span><span class="s2">in </span><span class="s1">enumerate(self.body):</span>
            <span class="s2">if </span><span class="s1">i == </span><span class="s3">0</span><span class="s1">:</span>
                <span class="s1">c.draw(surface</span><span class="s2">, True</span><span class="s1">)</span>
            <span class="s2">else</span><span class="s1">:</span>
                <span class="s1">c.draw(surface)</span>


<span class="s2">def </span><span class="s1">drawGrid(w</span><span class="s2">, </span><span class="s1">rows</span><span class="s2">, </span><span class="s1">surface):</span>
    <span class="s1">sizeBtwn = w // rows</span>

    <span class="s1">x = </span><span class="s3">0</span>
    <span class="s1">y = </span><span class="s3">0</span>
    <span class="s2">for </span><span class="s1">l </span><span class="s2">in </span><span class="s1">range(rows):</span>
        <span class="s1">x = x + sizeBtwn</span>
        <span class="s1">y = y + sizeBtwn</span>

        <span class="s1">pygame.draw.line(surface</span><span class="s2">, </span><span class="s1">(</span><span class="s3">255</span><span class="s2">, </span><span class="s3">255</span><span class="s2">, </span><span class="s3">255</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(x</span><span class="s2">, </span><span class="s3">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(x</span><span class="s2">, </span><span class="s1">w))</span>
        <span class="s1">pygame.draw.line(surface</span><span class="s2">, </span><span class="s1">(</span><span class="s3">255</span><span class="s2">, </span><span class="s3">255</span><span class="s2">, </span><span class="s3">255</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s3">0</span><span class="s2">, </span><span class="s1">y)</span><span class="s2">, </span><span class="s1">(w</span><span class="s2">, </span><span class="s1">y))</span>


<span class="s2">def </span><span class="s1">redrawWindow(surface):</span>
    <span class="s2">global </span><span class="s1">rows</span><span class="s2">, </span><span class="s1">width</span><span class="s2">, </span><span class="s1">s</span><span class="s2">, </span><span class="s1">snack</span>
    <span class="s1">surface.fill((</span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s1">))</span>
    <span class="s1">s.draw(surface)</span>
    <span class="s1">snack.draw(surface)</span>
    <span class="s1">drawGrid(width</span><span class="s2">, </span><span class="s1">rows</span><span class="s2">, </span><span class="s1">surface)</span>
    <span class="s1">pygame.display.update()</span>


<span class="s2">def </span><span class="s1">randomSnack(rows</span><span class="s2">, </span><span class="s1">item):</span>
    <span class="s1">positions = item.body</span>

    <span class="s2">while True</span><span class="s1">:</span>
        <span class="s1">x = random.randrange(rows)</span>
        <span class="s1">y = random.randrange(rows)</span>
        <span class="s2">if </span><span class="s1">len(list(filter(</span><span class="s2">lambda </span><span class="s1">z: z.pos == (x</span><span class="s2">, </span><span class="s1">y)</span><span class="s2">, </span><span class="s1">positions))) &gt; </span><span class="s3">0</span><span class="s1">:</span>
            <span class="s2">continue</span>
        <span class="s2">else</span><span class="s1">:</span>
            <span class="s2">break</span>

    <span class="s2">return </span><span class="s1">(x</span><span class="s2">, </span><span class="s1">y)</span>


<span class="s2">def </span><span class="s1">message_box(subject</span><span class="s2">, </span><span class="s1">content):</span>
    <span class="s1">root = tk.Tk()</span>
    <span class="s1">root.attributes(</span><span class="s4">&quot;-topmost&quot;</span><span class="s2">, True</span><span class="s1">)</span>
    <span class="s1">root.withdraw()</span>
    <span class="s1">messagebox.showinfo(subject</span><span class="s2">, </span><span class="s1">content)</span>
    <span class="s2">try</span><span class="s1">:</span>
        <span class="s1">root.destroy()</span>
    <span class="s2">except</span><span class="s1">:</span>
        <span class="s2">pass</span>


<span class="s2">def </span><span class="s1">main():</span>
    <span class="s2">global </span><span class="s1">width</span><span class="s2">, </span><span class="s1">rows</span><span class="s2">, </span><span class="s1">s</span><span class="s2">, </span><span class="s1">snack</span>
    <span class="s1">width = </span><span class="s3">500</span>
    <span class="s1">rows = </span><span class="s3">20</span>
    <span class="s1">win = pygame.display.set_mode((width</span><span class="s2">, </span><span class="s1">width))</span>
    <span class="s1">s = snake((</span><span class="s3">255</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s3">0</span><span class="s1">)</span><span class="s2">, </span><span class="s1">(</span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s1">))</span>
    <span class="s1">snack = cube(randomSnack(rows</span><span class="s2">, </span><span class="s1">s)</span><span class="s2">, </span><span class="s1">color=(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">255</span><span class="s2">, </span><span class="s3">0</span><span class="s1">))</span>
    <span class="s1">flag = </span><span class="s2">True</span>

    <span class="s1">clock = pygame.time.Clock()</span>

    <span class="s2">while </span><span class="s1">flag:</span>
        <span class="s1">pygame.time.delay(</span><span class="s3">50</span><span class="s1">)</span>
        <span class="s1">clock.tick(</span><span class="s3">10</span><span class="s1">)</span>
        <span class="s1">s.move()</span>
        <span class="s2">if </span><span class="s1">s.body[</span><span class="s3">0</span><span class="s1">].pos == snack.pos:</span>
            <span class="s1">s.addCube()</span>
            <span class="s1">snack = cube(randomSnack(rows</span><span class="s2">, </span><span class="s1">s)</span><span class="s2">, </span><span class="s1">color=(</span><span class="s3">0</span><span class="s2">, </span><span class="s3">255</span><span class="s2">, </span><span class="s3">0</span><span class="s1">))</span>

        <span class="s2">for </span><span class="s1">x </span><span class="s2">in </span><span class="s1">range(len(s.body)):</span>
            <span class="s2">if </span><span class="s1">s.body[x].pos </span><span class="s2">in </span><span class="s1">list(map(</span><span class="s2">lambda </span><span class="s1">z: z.pos</span><span class="s2">, </span><span class="s1">s.body[x + </span><span class="s3">1</span><span class="s1">:])):</span>
                <span class="s1">print(</span><span class="s4">'Score: '</span><span class="s2">, </span><span class="s1">len(s.body))</span>
                <span class="s1">message_box(</span><span class="s4">'You Lost!'</span><span class="s2">, </span><span class="s4">'Play again...'</span><span class="s1">)</span>
                <span class="s1">s.reset((</span><span class="s3">10</span><span class="s2">, </span><span class="s3">10</span><span class="s1">))</span>
                <span class="s2">break</span>

        <span class="s1">redrawWindow(win)</span>


<span class="s1">main()</span></pre>
</body>
</html>